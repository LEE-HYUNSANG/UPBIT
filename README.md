# Crypto Trading Bot

암호화폐 자동 거래 봇 프로젝트입니다. 설정된 조건에 따라 자동으로 매수/매도를 수행하며, 웹 인터페이스를 통해 설정을 관리할 수 있습니다.

## 주요 기능

### 1. 자동 거래
- 설정된 투자 금액과 코인 수에 따라 자동 거래
- 거래 가능 코인 필터링 (가격 범위, 거래량 기준)
- 실시간 시장 모니터링

### 2. 매매 조건 설정

#### 매수 조건
점수 기반 체크리스트를 사용하여 매수 신호를 판단합니다. 각 지표가 기준을 충족할 때마다 설정된 가중치가 더해지며, 누적 점수가 "매수 허용 점수" 이상이면 매수를 시도합니다.

- 체결강도
- 실시간 거래량 급증
- 호가 잔량 불균형
- 단기 등락률
- 전고점 근접 여부
- 추세 전환 징후
- Williams %R
- Stochastic
- MACD

#### 매도 조건 (OR 로직)
선택된 조건 중 하나라도 충족되면 매도가 실행됩니다.

- **손절 (Stop Loss)**
  - 설정된 손실 비율에 도달하면 자동 매도
  - 예: -3% 설정 시 3% 손실 발생하면 매도

- **익절 (Take Profit)**
  - 설정된 수익 비율에 도달하면 자동 매도
  - 예: 3% 설정 시 3% 수익 발생하면 매도

- **RSI**
  - 설정된 기준값 이상으로 상승할 때 매도 시그널
  - 일반적으로 70 이상을 과매수 구간으로 판단

- **Dead Cross**
  - 단기 이동평균선이 장기 이동평균선을 하향 돌파할 때 매도 시그널
  - Golden Cross와 동일한 이동평균선 기간 사용 권장

- **볼린저 밴드**
  - 가격이 상단 밴드에 근접하거나 돌파할 때 매도 시그널

### 3. 시장 자동감지 기능
- 시장 상황을 자동으로 분석하여 최적의 매매 조건 설정
- 활성화 시 수동 설정값이 자동 조정됨

### 4. 텔레그램 알림
각각 독립적으로 ON/OFF 가능한 알림 설정:

거래 알림:
- 거래 시작 알림
- 거래 완료 알림
- 수익/손실 알림

시스템 알림:
- 에러 발생 알림
- 일일 요약 알림
- 매수/매도 신호 알림

## 설치 및 실행

1. 필요 패키지 설치
```bash
pip install -r requirements.txt
```

2. 환경 변수 설정
프로젝트 루트에 `.env` 파일을 생성하고 다음 값을 입력합니다.
```env
UPBIT_ACCESS_KEY=your_access_key
UPBIT_SECRET_KEY=your_secret_key
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
LOG_LEVEL=INFO
```
실제 키로 교체한 후 저장하세요.

3. 설정 파일 구성
- `config.json` 파일에서 기본 설정 구성
- 웹 인터페이스에서 설정 변경 가능

4. 서버 실행
```bash
python web/app.py
```

5. 웹 인터페이스 접속
- http://localhost:5000 접속
- 설정 페이지: http://localhost:5000/settings
- 설정을 변경하고 저장하면 `config.json` 파일에 기록되어 재시작 후에도 유지됩니다.
- 대시보드: http://localhost:5000/dashboard

## 문제 해결(Troubleshooting)

애플리케이션 실행 시 모듈을 찾을 수 없다는 오류가 발생한다면 의존성 패키지가 설치되지 않은 상태일 수 있습니다. 다음 명령어로 모든 패키지를 설치한 후 다시 실행해 보세요.

```bash
pip install -r requirements.txt
```

### 로그 확인

텔레그램 알림이 동작하지 않는다면 프로젝트 루트에 생성되는 `trading.log`
파일을 확인하세요. 메시지 전송 시도와 응답 코드가 기록되어 원인을 파악할 수
있습니다. 더 자세한 정보를 원한다면 `.env` 파일에서 `LOG_LEVEL=DEBUG`로
설정한 뒤 다시 실행하세요.

또한 `telegram_test.py` 스크립트로 토큰과 채널 설정을 바로 확인할 수 있습니다.
다음 명령을 실행하여 테스트 메시지가 정상적으로 전송되는지 확인해 보세요.

```bash
python telegram_test.py
```

## 주의사항

1. 거래 설정
- 자동 거래 활성화 시 거래 기본 설정과 코인 선택 기준이 적용됨
- 설정 전 충분한 테스트 필요

2. 매매 조건
- 매수 조건은 AND 로직 (모든 조건 충족 필요)
- 매도 조건은 OR 로직 (하나라도 충족되면 매도)
- 조건 조합 시 신중한 설정 필요

3. 시장 자동감지
- 활성화 시 수동 설정한 매매 조건이 자동으로 조정됨
- 시장 상황에 따라 자동 조정되므로 모니터링 필요

4. 리스크 관리
- 적절한 손절/익절 설정 권장
- 투자 금액과 보유 코인 수 제한 설정 필요
- 모든 거래는 본인 책임하에 진행

## 기술 스택

- Backend: Python, Flask
- Frontend: HTML, CSS, JavaScript, Bootstrap 5
- Database: SQLite
- API: Upbit API
- 알림: Telegram Bot API

## 라이선스

This project is licensed under the MIT License - see the LICENSE file for details 

# 조건들
1. 상위 타임프레임 추세 필터 (15분)
2. EMA9/EMA26 골든크로스 (5분)
3. RSI 과매도 지속 (35)
4. 볼린저 밴드 하단 터치 후 복귀
5. 거래량 급증 (1.3배)
6. 손절 (-3%)
7. 익절 (+2%)
8. 데드크로스 (9/26)
9. RSI 과매수 후 하락 (65 -> 60)
10. 볼린저 상단 후 재진입 